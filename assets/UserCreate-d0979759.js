import{m as v,e as E,u as S,q as A,r as n,S as w,s as C,j as r,p as o,G as q,E as I,t as D,v as L,w as M,x as z}from"./index-dbaf992b.js";import{B}from"./Breadcrumb-c78627ad.js";import{A as F}from"./constants-543bb829.js";function U(){const{register:a,handleSubmit:g,watch:d,formState:{errors:c}}=v({mode:"onTouched"}),i=E(),l=S(e=>e.users),y=A(),N=async e=>{var t,m,b,p,u,x,f,k,h;e.avatar&&(e.avatar=e.avatar[0]),e.carInfos&&(e.carInfos=e.carInfos[0]),console.log(e),e.role==o.Driver?i(M({carInfos:e.carInfos,firstName:(t=e.firstName)==null?void 0:t.trim(),email:(m=e.email)==null?void 0:m.trim(),gender:(b=e.gender)==null?void 0:b.trim(),lang:e.lang,lastName:(p=e.lastName)==null?void 0:p.trim(),password:e.password,age:e.age,phoneNumber:(u=e.phoneNumber)==null?void 0:u.trim(),sponsorCode:(x=e.sponsorCode)==null?void 0:x.trim()})):i(z({type:(f=e.role)==null?void 0:f.trim(),phoneNumber:(k=e.phoneNumber)==null?void 0:k.trim(),password:e.password,email:(h=e.email)==null?void 0:h.trim()}))},[s,j]=n.useState();return n.useEffect(()=>{const e=d(t=>j(t));return()=>e.unsubscribe()},[d]),n.useEffect(()=>{l.createUserstatus==w.SUCCESS&&(i(C()),y("/users"))},[l]),r.jsxs(r.Fragment,{children:[r.jsx(B,{pageName:"Créer un utilisateur"}),r.jsx("div",{className:"grid",children:r.jsx("div",{className:"flex flex-col gap-9",children:r.jsxs("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[r.jsx("div",{className:"border-b border-stroke py-4 px-6.5 dark:border-strokedark",children:r.jsx("h3",{className:"font-medium text-black dark:text-white",children:"Add user form"})}),r.jsx("form",{onSubmit:g(N),children:r.jsxs("div",{className:"p-6.5",children:[r.jsxs("div",{className:"mb-4.5 flex flex-col gap-6 xl:flex-row",children:[r.jsxs("div",{className:"w-full xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"First name"}),r.jsx("input",{type:"text",...a("firstName",{required:!1}),placeholder:"Enter your first name",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"})]}),r.jsxs("div",{className:"w-full xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Last name"}),r.jsx("input",{type:"text",...a("lastName",{required:!0}),placeholder:"Enter your last name",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"})]})]}),r.jsxs("div",{className:"mb-4.5 flex flex-col gap-6 xl:flex-row",children:[r.jsxs("div",{className:"w-full xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Email"}),r.jsx("input",{type:"email",...a("email",{required:!1,pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Enter a valid e-mail address"}}),placeholder:"Enter your email",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"})]}),r.jsxs("div",{className:"w-full xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Phone"}),r.jsx("input",{type:"tel",...a("phoneNumber",{required:!1}),placeholder:"Enter your phoneNumber",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"})]})]}),r.jsxs("div",{className:"mb-4.5 flex flex-col gap-6 xl:flex-row",children:[r.jsxs("div",{className:"w-full xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Role"}),r.jsx("select",{...a("role"),className:"relative z-20 w-full appearance-none rounded border border-stroke bg-transparent py-3 px-5 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",children:Object.values(o).map(e=>{if(typeof e=="string")return r.jsx("option",{value:e,children:e})})})]}),(s==null?void 0:s.role)==o.Driver&&r.jsxs("div",{className:" xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Avatar"}),r.jsx("input",{type:"file",...a("avatar",{required:!1,validate:{lessThan10MB:e=>e[0]&&e[0].size<1e7||"Max 10MB",acceptedFormats:e=>["image/jpeg","image/png","image/gif","application/pdf"].includes(e[0].type)}}),placeholder:"Choice an avatar",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"})]})]}),(s==null?void 0:s.role)==o.Driver&&r.jsxs("div",{className:"mb-4.5 flex flex-col gap-6 xl:flex-row",children:[r.jsxs("div",{className:"w-full xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Gender"}),r.jsx("select",{...a("gender"),className:"relative z-20 w-full appearance-none rounded border border-stroke bg-transparent py-3 px-5 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",children:Object.values(q).map(e=>{if(typeof e=="string")return r.jsx("option",{value:e,children:e})})})]}),r.jsxs("div",{className:"w-full xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Age"}),r.jsx("select",{...a("age"),className:"relative z-20 w-full appearance-none rounded border border-stroke bg-transparent py-3 px-5 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",children:F.map(e=>{if(typeof e=="string")return r.jsx("option",{value:e,children:e})})})]})]}),(s==null?void 0:s.role)==o.Driver&&r.jsxs("div",{className:" flex flex-col gap-6 xl:flex-row",children:[r.jsxs("div",{className:"mb-4.5 w-full xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Sponsor Code"}),r.jsx("input",{type:"text",...a("sponsorCode",{required:!1}),placeholder:"Enter your Sponsor Code",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"})]}),r.jsxs("div",{className:"mb-4.5  xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Informations véhicule"}),r.jsx("input",{type:"file",...a("carInfos",{required:!1,validate:{lessThan10MB:e=>e[0]&&e[0].size<1e7||"Max 10MB",acceptedFormats:e=>["image/jpeg","image/png","image/gif","application/pdf"].includes(e[0].type)}}),placeholder:"Choice a File",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"})]})]}),r.jsxs("div",{className:"mb-4.5 flex flex-col gap-6 xl:flex-row",children:[r.jsxs("div",{className:"w-full xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Password"}),r.jsx("input",{type:"password",...a("password",{required:!1}),placeholder:"Enter your Password",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"})]}),r.jsxs("div",{className:"w-full xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Confirm Password"}),r.jsx("input",{type:"password",...a("cpassword",{required:!1,validate:e=>e===d("password")||"The passwords do not match"}),placeholder:"Enter your Password",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"}),c.cpassword&&r.jsx(I,{error:c.cpassword.message})]})]}),r.jsx("div",{className:"mb-4.5 flex flex-col gap-6 xl:flex-row",children:(s==null?void 0:s.role)==o.Driver&&r.jsxs("div",{className:"w-full xl:w-1/2",children:[r.jsx("label",{className:"mb-2.5 block text-black dark:text-white",children:"Langue"}),r.jsx("select",{...a("lang"),className:"relative z-20 w-full appearance-none rounded border border-stroke bg-transparent py-3 px-5 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",children:Object.values(D).map(e=>{if(typeof e=="string")return r.jsx("option",{value:e,children:e})})})]})}),r.jsx("span",{className:"px-6.5 py-0 text-danger block mb-2",children:L(l.errorMessage)}),r.jsx("button",{type:"submit",className:"flex justify-center rounded bg-primary p-3 font-medium text-gray float-right disabled:opacity-75",style:{margin:"10px"},disabled:l.createUserstatus==w.LOADING,children:"Enregistrer"})]})})]})})})]})}export{U as default};
